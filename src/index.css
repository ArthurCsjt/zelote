@tailwind base;
@tailwind components;
@tailwind utilities;
 
@layer base {
  :root {
    /* ===== BACKGROUNDS ===== */
    --background: 0 0% 100%;           /* Branco puro */
    --background-secondary: 220 13% 97%; /* Cinza muito claro */
    --foreground: 222.2 84% 4.9%;      /* Texto preto suave */
    
    /* ===== CARDS & SURFACES ===== */
    --card: 0 0% 100%;                 /* Fundo cards light */
    --card-foreground: 222.2 84% 4.9%; /* Texto cards light */
    --card-hover: 220 13% 95%;         /* Hover sutil light */
    
    /* ===== MODAIS & OVERLAYS ===== */
    --modal: 0 0% 100%;                /* Fundo modal light */
    --modal-border: 214 32% 91%;       /* Borda modal light */
    --overlay: 222.2 84% 4.9% / 0.8;   /* Overlay escuro */
    
    /* ===== GLASSMORPHISM ===== */
    --glass-bg: 0 0% 100% / 0.85;      /* 85% opaco light */
    --glass-border: 214 32% 91%;       /* Borda suave light */
    --glass-shadow: 220 13% 70% / 0.1; /* Sombra light */
    
    /* ===== INPUTS ===== */
    --input: 214.3 31.8% 91.4%;        /* Borda input light */
    --input-bg: 0 0% 100%;             /* Fundo input light */
    --input-foreground: 222.2 84% 4.9%;/* Texto input light */
    --input-placeholder: 215.4 16.3% 46.9% / 0.5; /* Placeholder light */
    
    /* ===== BUTTONS ===== */
    --primary: 221.2 83.2% 53.3%;      /* Azul primário */
    --primary-foreground: 210 40% 98%; /* Texto no primário */
    --primary-hover: 221.2 83.2% 45%;  /* Hover primário */
    
    /* ===== STATES ===== */
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;            /* Fundo muted light */
    --muted-foreground: 215.4 16.3% 46.9%; /* Texto muted light */
    --accent: 210 40% 96.1%;           /* Accent light */
    --accent-foreground: 222.2 47.4% 11.2%; /* Texto accent light */
    
    /* ===== SEMANTIC COLORS ===== */
    --success: 142 71% 45%;            /* Verde */
    --success-foreground: 144 61% 20%; /* Texto verde escuro */
    --success-bg: 142 76% 95%;         /* Fundo verde claro */
    
    --warning: 38 92% 50%;             /* Laranja */
    --warning-foreground: 26 90% 37%; /* Texto laranja escuro */
    --warning-bg: 48 96% 95%;          /* Fundo laranja claro */
    
    --error: 0 84% 60%;                /* Vermelho */
    --error-foreground: 0 90% 30%;     /* Texto vermelho escuro */
    --error-bg: 0 86% 97%;             /* Fundo vermelho claro */
    
    --info: 199 89% 48%;               /* Azul info */
    --info-foreground: 199 100% 20%;   /* Texto azul escuro */
    --info-bg: 199 95% 95%;            /* Fundo azul claro */
    
    /* ===== BORDERS & SHADOWS ===== */
    --border: 214.3 31.8% 91.4%;       /* Borda padrão light */
    --border-strong: 214 32% 75%;      /* Borda forte light */
    --ring: 221.2 83.2% 53.3%;         /* Focus ring */
    
    --shadow-sm: 220 13% 70% / 0.05;   /* Sombra pequena */
    --shadow-md: 220 13% 70% / 0.1;    /* Sombra média */
    --shadow-lg: 220 13% 70% / 0.15;   /* Sombra grande */
    
    /* ===== RADIUS ===== */
    --radius: 0.75rem;                 /* 12px padrão */
    --radius-sm: 0.5rem;               /* 8px pequeno */
    --radius-lg: 1rem;                 /* 16px grande */

    /* Menu Button Colors (PRESERVADO) */
    --menu-green: 142 76% 36%;
    --menu-green-hover: 142 76% 32%;
    --menu-blue: 213 94% 68%;
    --menu-blue-hover: 213 94% 64%;
    --menu-violet: 258 70% 45%;
    --menu-violet-hover: 258 70% 40%;
    --menu-amber: 35 93% 40%;
    --menu-amber-hover: 35 93% 35%;
    --menu-rose: 348 83% 47%;
    --menu-rose-hover: 348 83% 43%;
    --menu-teal: 174 70% 40%;
    --menu-teal-hover: 174 70% 35%;
    --menu-dark-blue: 213 90% 35%;
    --menu-dark-blue-hover: 213 90% 30%;
  }

  .dark {
    /* ===== BACKGROUNDS ===== */
    --background: 222.2 84% 4.9%;      /* Preto azulado */
    --background-secondary: 217.2 32.6% 12%;/* Cinza escuro azulado */
    --foreground: 210 40% 98%;         /* Texto branco suave */
    
    /* ===== CARDS & SURFACES ===== */
    --card: 217.2 32.6% 15%;           /* Cards dark elevados */
    --card-foreground: 210 40% 98%;    /* Texto cards dark */
    --card-hover: 217.2 32.6% 18%;     /* Hover dark */
    
    /* ===== MODAIS & OVERLAYS ===== */
    --modal: 217.2 32.6% 17%;          /* Modal dark MAIS CLARO */
    --modal-border: 217.2 32.6% 25%;   /* Borda modal VISÍVEL */
    --overlay: 222.2 84% 4.9% / 0.9;   /* Overlay mais escuro */
    
    /* ===== GLASSMORPHISM ===== */
    --glass-bg: 217.2 32.6% 15% / 0.95; /* 95% opaco dark */
    --glass-border: 217.2 32.6% 25%;   /* Borda visível dark */
    --glass-shadow: 220 13% 0% / 0.3;  /* Sombra forte dark */
    
    /* ===== INPUTS ===== */
    --input: 217.2 32.6% 25%;          /* Borda input CLARA */
    --input-bg: 217.2 32.6% 12%;       /* Fundo input dark */
    --input-foreground: 210 40% 98%;   /* Texto BRANCO */
    --input-placeholder: 215.4 16.3% 65% / 0.5; /* Placeholder VISÍVEL */
    
    /* ===== BUTTONS ===== */
    --primary: 217.2 91.2% 59.8%;      /* Azul mais claro no dark */
    --primary-foreground: 222.2 47.4% 11.2%; /* Texto escuro no primário */
    --primary-hover: 217.2 91.2% 65%;  /* Hover mais claro */
    
    /* ===== STATES ===== */
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;        /* Muted dark */
    --muted-foreground: 215 20.2% 65.1%; /* Texto muted MAIS CLARO */
    --accent: 217.2 32.6% 17.5%;       /* Accent dark */
    --accent-foreground: 210 40% 98%;  /* Texto accent claro */
    
    /* ===== SEMANTIC COLORS (MAIS VIBRANTES NO DARK) */
    --success: 142 76% 55%;            /* Verde mais claro */
    --success-foreground: 144 61% 90%; /* Texto verde claro */
    --success-bg: 142 76% 15%;         /* Fundo verde escuro */
    
    --warning: 38 92% 60%;             /* Laranja mais claro */
    --warning-foreground: 48 96% 85%; /* Texto laranja claro */
    --warning-bg: 38 92% 15%;          /* Fundo laranja escuro */
    
    --error: 0 84% 65%;                /* Vermelho mais claro */
    --error-foreground: 0 86% 90%;     /* Texto vermelho claro */
    --error-bg: 0 84% 15%;             /* Fundo vermelho escuro */
    
    --info: 199 89% 58%;               /* Azul mais claro */
    --info-foreground: 199 95% 90%;    /* Texto azul claro */
    --info-bg: 199 89% 15%;            /* Fundo azul escuro */
    
    /* ===== BORDERS & SHADOWS ===== */
    --border: 217.2 32.6% 25%;         /* Borda VISÍVEL dark */
    --border-strong: 217.2 32.6% 35%;  /* Borda forte dark */
    --ring: 217.2 91.2% 59.8%;         /* Focus ring claro */
    
    --shadow-sm: 220 13% 0% / 0.2;     /* Sombras FORTES no dark */
    --shadow-md: 220 13% 0% / 0.3;
    --shadow-lg: 220 13% 0% / 0.5;

    /* ===== RADIUS ===== */
    --radius: 0.75rem;                 /* 12px padrão */
    --radius-sm: 0.5rem;               /* 8px pequeno */
    --radius-lg: 1rem;                 /* 16px grande */

    /* Menu Button Colors (PRESERVADO) */
    --menu-green: 142 76% 36%;
    --menu-green-hover: 142 76% 32%;
    --menu-blue: 213 94% 68%;
    --menu-blue-hover: 213 94% 64%;
    --menu-violet: 258 70% 45%;
    --menu-violet-hover: 258 70% 40%;
    --menu-amber: 35 93% 40%;
    --menu-amber-hover: 35 93% 35%;
    --menu-rose: 348 83% 47%;
    --menu-rose-hover: 348 83% 43%;
    --menu-teal: 174 70% 40%;
    --menu-teal-hover: 174 70% 35%;
    --menu-dark-blue: 213 90% 35%;
    --menu-dark-blue-hover: 213 90% 30%;
  }
}
 
@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: -apple-system, BlinkMacSystemFont, "San Francisco", "Helvetica Neue", sans-serif;
    
    /* REMOVIDO: Gradiente. Voltando ao fundo padrão (bg-background) */
    background: none;
    background-attachment: fixed; 
  }
}

/* Enhanced glass card effect - iPhone style */
.glass-card {
  /* Light Mode */
  background: hsl(var(--glass-bg));
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid hsl(var(--glass-border) / 0.4); /* Usando a variável com opacidade */
  box-shadow: 0 4px 30px 0 hsl(var(--glass-shadow)), 
              0 1px 0 0 hsl(var(--glass-border) / 0.3) inset, /* Borda interna clara */
              0 -1px 0 0 hsl(var(--glass-shadow) / 0.05) inset; /* Borda interna escura */
  border-radius: var(--radius-lg); /* Usando a variável de radius */
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

/* Dark Mode Glass Card Overrides */
.dark .glass-card {
  /* Fundo semi-transparente escuro que permite ver o fundo principal */
  background: hsl(var(--glass-bg)); 
  /* Aumentando a opacidade da borda para melhor definição */
  border: 1px solid hsl(var(--glass-border) / 0.7); 
  /* Sombra mais forte e escura */
  box-shadow: 0 6px 40px 0 hsl(var(--glass-shadow)), 
              0 1px 0 0 hsl(var(--glass-border) / 0.5) inset,
              0 -1px 0 0 hsl(var(--glass-shadow) / 0.3) inset;
}


/* ======================================================================== */
/* ADIÇÃO: Classes de Delay para Animação Sequencial */
/* ======================================================================== */
.animation-delay-0 { animation-delay: 0ms; }
.animation-delay-100 { animation-delay: 100ms; }
.animation-delay-200 { animation-delay: 200ms; }
.animation-delay-300 { animation-delay: 300ms; }
.animation-delay-400 { animation-delay: 400ms; }
.animation-delay-500 { animation-delay: 500ms; }
.animation-delay-600 { animation-delay: 600ms; }
.animation-delay-700 { animation-delay: 700ms; }
.animation-delay-800 { animation-delay: 800ms; }
.animation-delay-900 { animation-delay: 900ms; }
.animation-delay-1000 { animation-delay: 1000ms; }
.animation-delay-1100 { animation-delay: 1100ms; }


/* PWA and Layout specific styles */
.safe-area-top {
  padding-top: env(safe-area-inset-top);
}

/* ... (resto do seu CSS) ... */

.stat-card-gradient-green {
  background: linear-gradient(135deg, #bbf7d0 0%, #dcfce7 100%);
  border: none;
}


/* ======================================================================== */
/* ADIÇÃO: Estilos para corrigir o enquadramento do QR Scanner (`html5-qrcode`)  */
/* ======================================================================== */

/* Este é o 'palco' do scanner, o <div id="qr-code-reader"> que está no seu QRCodeScanner.tsx. */
#qr-code-reader {
  width: 100%;             /* Faz o scanner ocupar toda a largura do modal */
  max-width: 400px;        /* Limita o tamanho em telas maiores */
  margin: 1rem auto;       /* Centraliza e dá um espaçamento */

  /* A PARTE MAIS IMPORTANTE: Força um formato quadrado, crucial para o enquadramento */
  aspect-ratio: 1 / 1;
  
  position: relative;      /* Necessário para o posicionamento interno do vídeo */
  overflow: hidden;        /* Esconde as partes do vídeo que 'vazam' para fora do quadrado */
  border-radius: 12px;     /* Apenas para um visual mais agradável */
}

/* O elemento de vídeo que a biblioteca 'html5-qrcode' cria DENTRO do #qr-code-reader */
#qr-code-reader video {
  width: 100%;
  height: 100%;
  
  /* A CORREÇÃO PRINCIPAL: Faz o vídeo preencher o espaço sem distorcer, cortando o excesso */
  object-fit: cover; 
}

/* A 'caixa de scan' que a própria biblioteca desenha. 
   Este CSS ajuda a garantir que ela não fique com bordas estranhas. */
#qr-code-reader__scan_region {
  border-radius: 8px;
}

/* ======================================================================== */
/* NOVO: Animação de Fundo para o Menu Principal (Tons de Cinza) */
/* ======================================================================== */

@keyframes bg-pan {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.animated-menu-bg {
  /* Mantendo o tamanho grande para o fade amplo */
  background-size: 400% 400%; 
  /* Mantendo a velocidade moderada */
  animation: bg-pan 20s linear infinite;
}

/* Light Mode Gradient (Tons de cinza muito claros) */
.light .animated-menu-bg {
  background-image: linear-gradient(
    -45deg, 
    hsl(var(--background)) 0%, 
    hsl(220 13% 95%) 25%, /* Cinza muito claro */
    hsl(220 13% 90%) 50%, /* Cinza claro */
    hsl(var(--background)) 100%
  );
}

/* Dark Mode Gradient (Tons de cinza escuro e preto) */
.dark .animated-menu-bg {
  background-image: linear-gradient(
    -45deg, 
    hsl(222.2 84% 4.9%) 0%, 
    hsl(217.2 32.6% 12%) 25%, /* Cinza escuro */
    hsl(222.2 84% 3%) 50%, /* Quase preto */
    hsl(222.2 84% 4.9%) 100%
  );
}

/* ======================================================================== */
/* CORREÇÃO VISUAL: Estilos para o Calendário de Agendamento */
/* ======================================================================== */

.calendar-grid {
    display: grid;
    /* A coluna de hora (80px) e 5 colunas de dia (1fr) são definidas no componente React */
    gap: 10px; /* Espaçamento entre os slots */
    width: 100%;
    min-width: 700px; /* Garante que não fique muito apertado em telas menores */
}

.grid-header {
    text-align: center;
    font-weight: 600;
    color: hsl(var(--muted-foreground));
    margin-bottom: 10px;
    padding-top: 5px;
}

.time-label {
    /* Estilos de botão preenchido */
    background-color: hsl(var(--primary)); /* Fundo primário */
    border-radius: 12px; /* Mais arredondado */
    border: 1px solid hsl(var(--primary)); /* Borda sólida */
    
    /* Estilos de alinhamento */
    text-align: center;
    font-size: 0.8rem;
    font-weight: 600;
    color: hsl(var(--primary-foreground)); /* Texto branco/claro */
    padding: 0 10px; /* Padding horizontal para formato pílula */
    height: 60px; /* Altura fixa do slot */
    display: flex;
    align-items: center;
    justify-content: center; /* Centraliza o texto */
    
    /* Dark Mode Overrides */
    .dark & {
        /* Usando um tom mais escuro para o Dark Mode, como o fundo do card */
        background-color: hsl(var(--card)); 
        border-color: hsl(var(--border-strong));
        color: hsl(var(--foreground));
    }
}

/* Estilo base para o slot */
.slot {
    height: 60px;
    border-radius: 10px;
    padding: 8px 12px;
    transition: all 0.2s ease-in-out;
    border-left: 5px solid transparent;
    font-size: 0.8rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
    overflow: hidden;
}

/* Estilo para o slot disponível (vazio) */
.slot.available {
    background-color: hsl(var(--background-secondary));
    border: 2px dashed hsl(var(--border-strong));
    cursor: pointer;
    text-align: center;
    align-items: center;
    justify-content: center;
}

.slot.available:hover {
    background-color: hsl(var(--muted));
    border-color: hsl(var(--muted-foreground));
}

/* Estilos para os estados de reserva (cores baseadas no Tailwind/Shadcn) */

/* Minha Reserva (Azul) */
.slot.my-reservation {
    background-color: hsl(210 40% 96.1% / 0.8); /* secondary/80 */
    border-left-color: hsl(var(--primary));
}
.dark .slot.my-reservation {
    background-color: hsl(217.2 32.6% 17.5% / 0.8); /* secondary/80 dark */
    border-left-color: hsl(var(--primary));
}

/* Parcialmente Reservado (Âmbar/Warning) */
.slot.partial {
    background-color: hsl(var(--warning-bg) / 0.8);
    border-left-color: hsl(var(--warning));
}
.dark .slot.partial {
    background-color: hsl(38 92% 15% / 0.8); /* warning-bg dark */
    border-left-color: hsl(var(--warning));
}

/* Esgotado (Vermelho/Error) */
.slot.full {
    background-color: hsl(var(--error-bg) / 0.8);
    border-left-color: hsl(var(--error));
    opacity: 0.9;
}
.dark .slot.full {
    background-color: hsl(0 84% 15% / 0.8); /* error-bg dark */
    border-left-color: hsl(var(--error));
}

/* Estilos de texto dentro dos slots */
.slot-title {
    font-weight: 600;
    font-size: 0.85rem;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

.slot-subtitle {
    font-size: 0.75rem;
    color: hsl(var(--muted-foreground));
}